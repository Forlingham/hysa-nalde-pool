# Scash çŸ¿æ± å¿«é€Ÿå¼€å§‹æŒ‡å—

## ä¸€åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨

### 1. å¯åŠ¨ Scash èŠ‚ç‚¹

ç¡®ä¿ Scash èŠ‚ç‚¹æ­£åœ¨è¿è¡Œï¼š

```bash
scashd -server=1 -txindex=1 -rpcuser=scash_user -rpcpassword=scash_password -rpcallowip=127.0.0.1 -rpcport=18443 -port=18444 -listen=1 -bind=127.0.0.1
```

### 2. ç¼–è¯‘åŸç”Ÿæ¨¡å—

```bash
cd scash-pool
./build-native.sh
```

### 3. å¯åŠ¨çŸ¿æ± 

```bash
bun run src/index.ts
```

### 4. è¿æ¥çŸ¿å·¥

```bash
./minerd -o stratum+tcp://127.0.0.1:3333 -u worker1 -p x
```

## é¢„æœŸè¾“å‡º

### çŸ¿æ± è¾“å‡º

```
========================================
ğŸš€ å¯åŠ¨ Scash Demo Pool
========================================
Scash èŠ‚ç‚¹: 127.0.0.1:18443
Stratum ç«¯å£: 3333
çŸ¿æ± éš¾åº¦: 1.0
========================================

ğŸ“¦ åŠ è½½ RandomX åŸç”Ÿæ¨¡å—...
âš ï¸  ä½¿ç”¨æ¨¡æ‹Ÿçš„ RandomX éªŒè¯ï¼ˆéœ€è¦ç¼–è¯‘åŸç”Ÿæ¨¡å—ä»¥è·å¾—çœŸå®éªŒè¯ï¼‰

ğŸ“¡ è¿æ¥åˆ° Scash èŠ‚ç‚¹...
âœ… è¿æ¥æˆåŠŸï¼å½“å‰åŒºå—é«˜åº¦: 0

Stratum æœåŠ¡å™¨å·²å¯åŠ¨ï¼Œç›‘å¬ç«¯å£ 3333

âœ… çŸ¿æ± å·²å¯åŠ¨ï¼Œç­‰å¾…çŸ¿å·¥è¿æ¥...
```

### çŸ¿å·¥è¾“å‡º

```
[2024-01-11 12:00:00] Starting Stratum on stratum+tcp://127.0.0.1:3333
[2024-01-11 12:00:01] Stratum connected to 127.0.0.1:3333
[2024-01-11 12:00:02] authenticated as worker1
[2024-01-11 12:00:03] new job received
[2024-01-11 12:00:04] accepted: 1/1 (100.00%), 0 H/s
```

## å¸¸è§é—®é¢˜

### Q: ç¼–è¯‘åŸç”Ÿæ¨¡å—æ—¶æç¤ºæ‰¾ä¸åˆ° CMakeï¼Ÿ

**A**: å®‰è£… CMake
```bash
# Ubuntu/Debian
sudo apt-get install cmake

# macOS
brew install cmake
```

### Q: çŸ¿æ± å¯åŠ¨åæ˜¾ç¤º"ä½¿ç”¨æ¨¡æ‹Ÿçš„ RandomX éªŒè¯"ï¼Ÿ

**A**: è¿™æ„å‘³ç€åŸç”Ÿæ¨¡å—æœªåŠ è½½ã€‚è¿è¡Œç¼–è¯‘è„šæœ¬ï¼š
```bash
./build-native.sh
```

### Q: å¦‚ä½•éªŒè¯åŸç”Ÿæ¨¡å—æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Ÿ

**A**: æŸ¥çœ‹çŸ¿æ± å¯åŠ¨æ—¥å¿—ï¼Œå¦‚æœçœ‹åˆ°ï¼š
```
âœ… RandomX æ¨¡å—åŠ è½½å®Œæˆ
```
è¯´æ˜åŸç”Ÿæ¨¡å—å·²æˆåŠŸåŠ è½½ã€‚å¦‚æœçœ‹åˆ°ï¼š
```
âš ï¸  ä½¿ç”¨æ¨¡æ‹Ÿçš„ RandomX éªŒè¯
```
è¯´æ˜ä½¿ç”¨çš„æ˜¯æ¨¡æ‹Ÿå®ç°ã€‚

### Q: çŸ¿å·¥è¿æ¥åä¸€ç›´æç¤º"unauthorized worker"ï¼Ÿ

**A**: æ£€æŸ¥çŸ¿å·¥å‘½ä»¤ä¸­çš„ç”¨æˆ·åæ˜¯å¦æ­£ç¡®ï¼š
```bash
# æ­£ç¡®
./minerd -o stratum+tcp://127.0.0.1:3333 -u worker1 -p x

# é”™è¯¯ï¼ˆç¼ºå°‘ -u å‚æ•°ï¼‰
./minerd -o stratum+tcp://127.0.0.1:3333 -p x
```

### Q: æ‰€æœ‰ä»½é¢éƒ½è¢«æ‹’ç»ï¼Ÿ

**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç¡®è®¤åŸç”Ÿæ¨¡å—å·²ç¼–è¯‘æˆåŠŸ
2. æŸ¥çœ‹çŸ¿æ± æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
3. ç¡®è®¤ Scash èŠ‚ç‚¹æ­£å¸¸è¿è¡Œ
4. æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦ç¨³å®š

## ä¸‹ä¸€æ­¥

1. **æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£**: [README.md](README.md)
2. **äº†è§£åŸç”Ÿæ¨¡å—ç¼–è¯‘**: [README_NATIVE.md](README_NATIVE.md)
3. **ä¿®æ”¹é…ç½®**: ç¼–è¾‘ `src/index.ts` è°ƒæ•´çŸ¿æ± å‚æ•°
4. **è¿æ¥å¤šä¸ªçŸ¿å·¥**: ä½¿ç”¨ä¸åŒçš„ç”¨æˆ·åè¿æ¥å¤šä¸ªçŸ¿å·¥å®ä¾‹

## æ€§èƒ½ä¼˜åŒ–

### å¯ç”¨ RandomX å¿«é€Ÿæ¨¡å¼

ç¼–è¾‘ `native/scash_verify.cpp`ï¼š

```cpp
randomx_flags flags = randomx_get_flags();
flags |= RANDOMX_FLAG_FULL_MEM;  // æ·»åŠ è¿™è¡Œ
flags |= RANDOMX_FLAG_LARGE_PAGES;  // å¯é€‰ï¼šå¯ç”¨å¤§é¡µ
```

é‡æ–°ç¼–è¯‘ï¼š
```bash
./build-native.sh
```

### è°ƒæ•´çŸ¿æ± éš¾åº¦

ç¼–è¾‘ `src/index.ts`ï¼š

```typescript
const POOL_CONFIG = {
  stratumPort: 3333,
  poolDifficulty: 2.0,  // æé«˜éš¾åº¦å‡å°‘æ— æ•ˆä»½é¢
  poolName: 'Scash Demo Pool',
};
```

### å¢åŠ  RandomX VM ç¼“å­˜

ç¼–è¾‘ `native/scash_verify.cpp` æ·»åŠ å¤š epoch ç¼“å­˜æ”¯æŒã€‚

## ç›‘æ§å’Œè°ƒè¯•

### æŸ¥çœ‹çŸ¿æ± ç»Ÿè®¡

çŸ¿æ± æ¯åˆ†é’Ÿä¼šè¾“å‡ºç»Ÿè®¡ä¿¡æ¯ï¼š

```
ğŸ“ˆ çŸ¿æ± ç»Ÿè®¡:
   æ€»ä»½é¢: 1234
   æœ‰æ•ˆä»½é¢: 1200
   æ— æ•ˆä»½é¢: 34
   å‘ç°åŒºå—: 2
   æœ€ååŒºå—é«˜åº¦: 456
   çŸ¿æ± ç®—åŠ›: 12345 H/s
```

### å¯ç”¨è°ƒè¯•æ—¥å¿—

ç¼–è¾‘ `src/stratum-server.ts`ï¼Œåœ¨å…³é”®ä½ç½®æ·»åŠ  `console.log`ã€‚

### æŸ¥çœ‹èŠ‚ç‚¹æ—¥å¿—

Scash èŠ‚ç‚¹æ—¥å¿—ä¼šæ˜¾ç¤ºï¼š
- æ¥æ”¶åˆ°çš„åŒºå—
- éªŒè¯ç»“æœ
- ç½‘ç»œçŠ¶æ€

## è·å–å¸®åŠ©

- æŸ¥çœ‹ Scash åè®®è§„èŒƒ: `../sips/scash-protocol-spec.md`
- æŸ¥çœ‹ Scash æŒ–çŸ¿è½¯ä»¶: `../cpuminer-scash/`
- æŸ¥çœ‹ Scash æ ¸å¿ƒä»£ç : `../scash/src/`

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼